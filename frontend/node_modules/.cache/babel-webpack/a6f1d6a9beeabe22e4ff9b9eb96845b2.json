{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { takeWhile } from 'rxjs/operators';\nimport * as $ from 'jquery';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../auth.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/button\";\n\nfunction LoginComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵelementStart(1, \"div\", 27);\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3, \"Authenticating User...\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵelementStart(1, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function LoginComponent_div_19_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.login();\n    });\n    i0.ɵɵtext(2, \" Login using Google! \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function LoginComponent_div_19_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.showSphereForm();\n    });\n    i0.ɵɵtext(4, \" Login using SPHERE \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_div_20_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 40);\n    i0.ɵɵtext(1, \" Username is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_div_20_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 40);\n    i0.ɵɵtext(1, \" Password is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 31);\n    i0.ɵɵelementStart(1, \"h4\");\n    i0.ɵɵtext(2, \"SPHERE Login\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"form\", 32);\n    i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_div_20_Template_form_ngSubmit_3_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.submitSphereLogin();\n    });\n    i0.ɵɵelementStart(4, \"div\", 33);\n    i0.ɵɵelement(5, \"input\", 34);\n    i0.ɵɵtemplate(6, LoginComponent_div_20_div_6_Template, 2, 0, \"div\", 35);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 33);\n    i0.ɵɵelement(8, \"input\", 36);\n    i0.ɵɵtemplate(9, LoginComponent_div_20_div_9_Template, 2, 0, \"div\", 35);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 37);\n    i0.ɵɵelementStart(11, \"button\", 38);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"button\", 39);\n    i0.ɵɵlistener(\"click\", function LoginComponent_div_20_Template_button_click_13_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.hideSphereForm();\n    });\n    i0.ɵɵtext(14, \" Cancel \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    let tmp_1_0;\n    let tmp_2_0;\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"formGroup\", ctx_r2.sphereLoginForm);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_1_0 = ctx_r2.sphereLoginForm.get(\"username\")) == null ? null : tmp_1_0.invalid) && ((tmp_1_0 = ctx_r2.sphereLoginForm.get(\"username\")) == null ? null : tmp_1_0.touched));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx_r2.sphereLoginForm.get(\"password\")) == null ? null : tmp_2_0.invalid) && ((tmp_2_0 = ctx_r2.sphereLoginForm.get(\"password\")) == null ? null : tmp_2_0.touched));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r2.sphereLoginForm.invalid || ctx_r2.isLoading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.isLoading ? \"Logging in...\" : \"Login to DEW\", \" \");\n  }\n}\n\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(cd, fb, router, authService) {\n      this.cd = cd;\n      this.fb = fb;\n      this.router = router;\n      this.authService = authService;\n      this.alive = true;\n      this.emailId = \"\";\n      this.password = \"\";\n      this.hide = true;\n      this.showAlternatelogin = true; // SPHERE login properties\n\n      this.showSphereLoginForm = false;\n      this.isLoading = false; // Initialize SPHERE login form\n\n      this.sphereLoginForm = this.fb.group({\n        username: ['', [Validators.required]],\n        password: ['', [Validators.required]]\n      });\n    }\n\n    ngOnInit() {\n      if (this.authService.checkAuthentication()) {\n        this.router.navigate(['dashboard']);\n      } else {\n        this.alive = false;\n      }\n    }\n\n    login() {\n      $('.SignInOrContent').toggleClass('hide');\n      this.authService.loginWithGoogle().then(result => {\n        this.alive = true;\n        this.authService.authenticate(result).pipe(takeWhile(() => this.alive)).subscribe(authResult => {\n          $('.SignInOrContent').toggleClass('hide');\n\n          if (authResult.navigateTo == undefined) {\n            this.authService.enableAuthentication();\n            this.router.navigate(['dashboard']);\n          } else {\n            this.router.navigate(['auth/registerwithgoogle', this.authService.getToken()]);\n          }\n        }, error => {\n          alert(\"Invalid User. Please Try again\");\n          this.router.navigate(['auth/login']);\n        });\n      }).catch(result => {\n        $('.SignInOrContent').toggleClass('hide');\n      });\n    } // SPHERE login methods\n\n\n    showSphereForm() {\n      this.showSphereLoginForm = true;\n      this.cd.detectChanges(); // Trigger change detection\n    }\n\n    hideSphereForm() {\n      this.showSphereLoginForm = false;\n      this.sphereLoginForm.reset();\n      this.cd.detectChanges(); // Trigger change detection\n    }\n\n    submitSphereLogin() {\n      if (this.sphereLoginForm.valid && !this.isLoading) {\n        this.isLoading = true;\n        this.cd.detectChanges(); // Trigger change detection\n\n        const {\n          username,\n          password\n        } = this.sphereLoginForm.value;\n        this.authService.loginWithSphere(username, password).then(result => {\n          this.isLoading = false; // Direct login to DEW without backend validation\n\n          this.authService.enableAuthentication();\n          this.router.navigate(['dashboard']);\n        }).catch(error => {\n          this.isLoading = false;\n          alert(\"SPHERE login failed. Please check your credentials.\");\n          console.error('SPHERE login failed:', error);\n          this.cd.detectChanges(); // Trigger change detection\n        });\n      }\n    }\n\n    enablePassword() {\n      this.showAlternatelogin = false;\n    }\n\n    disablePassword() {\n      this.showAlternatelogin = true;\n    }\n\n    isAlternateLoginEnable() {\n      return this.showAlternatelogin;\n    }\n\n  }\n\n  LoginComponent.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.AuthService));\n  };\n\n  LoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"login\"]],\n    decls: 58,\n    vars: 3,\n    consts: [[1, \"d-flex\", \"flex-column\", \"justify-content-center\", \"SignInOrContent\", \"hide\"], [1, \"d-flex\", \"justify-content-center\"], [\"role\", \"status\", 1, \"spinner-border\", \"text-primary\", 2, \"width\", \"3rem\", \"height\", \"3rem\"], [1, \"sr-only\"], [1, \"d-flex\", \"justify-content-center\", 2, \"margin-top\", \"20px\"], [1, \"SignInOrContent\"], [\"class\", \"row\", 4, \"ngIf\"], [1, \"container-fluid\"], [1, \"row\"], [1, \"col-md-2\"], [\"href\", \"#\", 1, \"navbar-brand\"], [\"src\", \"./assets/isi-logo.jpg\", \"alt\", \"logo\", 1, \"img-thumbnail\", 2, \"border\", \"none\", \"height\", \"80px\"], [1, \"col-md-7\", \"center-aligned\"], [1, \"title\"], [1, \"col-md-3\", \"center-aligned\"], [\"class\", \"login-options\", 4, \"ngIf\"], [\"class\", \"sphere-form\", 4, \"ngIf\"], [1, \"row\", \"justify-content-center\"], [1, \"col-md-10\"], [1, \"col-md-5\", \"center-aligned\"], [\"src\", \"./assets/dew-description.jpg\", \"height\", \"400px\", \"alt\", \"description-infographic\", 1, \"description-image\"], [1, \"col-md-7\"], [\"href\", \"https://www.isi.deterlab.net/\"], [\"href\", \"/docs\"], [\"href\", \"/docs/contact_us\"], [1, \"col-md-12\", \"center-aligned\"], [2, \"bottom\", \"0\", \"left\", \"26%\", \"position\", \"absolute\"], [1, \"col-md-12\"], [1, \"login-options\"], [\"mat-stroked-button\", \"\", 1, \"login-btn\", \"google-btn\", 3, \"click\"], [\"mat-stroked-button\", \"\", 1, \"login-btn\", \"sphere-btn\", 3, \"click\"], [1, \"sphere-form\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"form-group\"], [\"type\", \"text\", \"formControlName\", \"username\", \"placeholder\", \"SPHERE Username\", 1, \"form-control\", \"sphere-input\"], [\"class\", \"error\", 4, \"ngIf\"], [\"type\", \"password\", \"formControlName\", \"password\", \"placeholder\", \"SPHERE Password\", 1, \"form-control\", \"sphere-input\"], [1, \"button-group\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"sphere-submit\", 3, \"disabled\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", \"sphere-cancel\", 3, \"click\"], [1, \"error\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"span\", 3);\n        i0.ɵɵtext(4, \"Signing In...\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 4);\n        i0.ɵɵelementStart(6, \"div\");\n        i0.ɵɵtext(7, \" Signing In \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 5);\n        i0.ɵɵtemplate(9, LoginComponent_div_9_Template, 4, 0, \"div\", 6);\n        i0.ɵɵelementStart(10, \"div\", 7);\n        i0.ɵɵelementStart(11, \"div\", 8);\n        i0.ɵɵelementStart(12, \"div\", 9);\n        i0.ɵɵelementStart(13, \"a\", 10);\n        i0.ɵɵelement(14, \"img\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 12);\n        i0.ɵɵelementStart(16, \"h1\", 13);\n        i0.ɵɵtext(17, \"DISTRIBUTED EXPERIMENT WORKFLOWS\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\", 14);\n        i0.ɵɵtemplate(19, LoginComponent_div_19_Template, 5, 0, \"div\", 15);\n        i0.ɵɵtemplate(20, LoginComponent_div_20_Template, 15, 5, \"div\", 16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"div\", 17);\n        i0.ɵɵelementStart(22, \"div\", 18);\n        i0.ɵɵelementStart(23, \"p\");\n        i0.ɵɵtext(24, \"Welcome to DEW - distributed experiment workflow portal. DEW complements current testbeds by helping users design experiments from top down. Currently, DEW focuses on supporting experiment design and running, but in the near future we hope to add support for monitoring, ananlysis, and storage, too. \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"div\", 8);\n        i0.ɵɵelementStart(26, \"div\", 19);\n        i0.ɵɵelement(27, \"img\", 20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"div\", 21);\n        i0.ɵɵelementStart(29, \"p\");\n        i0.ɵɵtext(30, \" DEW views an experiment as a collection of \");\n        i0.ɵɵelementStart(31, \"b\");\n        i0.ɵɵtext(32, \"scenario\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(33, \"(who does what and when), \");\n        i0.ɵɵelementStart(34, \"b\");\n        i0.ɵɵtext(35, \"bindings\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(36, \"(how is each action performed) and \");\n        i0.ɵɵelementStart(37, \"b\");\n        i0.ɵɵtext(38, \"constraints\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(39, \"(topology/hardware specifics guiding experiment materialization).Our portal enables you to design an experiment using these abstractions and visualize it. You can then export it as a topology file (NS file) and a runnable script (Bash script) and deploy it on a testbed. This is illustrated in the figure on the left. \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(40, \"p\");\n        i0.ɵɵtext(41, \"DEW is currently closely coupled with the \");\n        i0.ɵɵelementStart(42, \"a\", 22);\n        i0.ɵɵtext(43, \"Deterlab testbed\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(44, \", but we are looking forward to support more testbeds in the near future.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(45, \"p\");\n        i0.ɵɵtext(46, \"Please click on the buttons at the top right to login using your Google or SPHERE credentials. Feel free to \");\n        i0.ɵɵelementStart(47, \"a\", 23);\n        i0.ɵɵtext(48, \"view the documentation\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(49, \" and/or \");\n        i0.ɵɵelementStart(50, \"a\", 24);\n        i0.ɵɵtext(51, \"contact us\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(52, \" with your suggestions and feedback.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(53, \"div\", 8);\n        i0.ɵɵelementStart(54, \"div\", 25);\n        i0.ɵɵelementStart(55, \"p\");\n        i0.ɵɵtext(56, \"This work is supported by the National Science Foundation (award #1835608)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(57, \"div\", 26);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngIf\", ctx.alive);\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngIf\", !ctx.showSphereLoginForm);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showSphereLoginForm);\n      }\n    },\n    directives: [i4.NgIf, i5.MatButton, i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.DefaultValueAccessor, i1.NgControlStatus, i1.FormControlName],\n    styles: [\"#customBtn[_ngcontent-%COMP%]{display:inline-block;background:white;color:#444;width:190px;border-radius:5px;border:thin solid #888;box-shadow:1px 1px 1px gray;white-space:nowrap}#customBtn[_ngcontent-%COMP%]:hover{cursor:pointer}span.label[_ngcontent-%COMP%]{font-family:serif;font-weight:normal}span.icon[_ngcontent-%COMP%]{background:url(/assets/g-normal.png) transparent 5px 50% no-repeat;display:inline-block;vertical-align:middle;width:42px;height:42px}span.buttonText[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;padding-left:42px;padding-right:42px;font-size:14px;font-weight:bold;font-family:\\\"Roboto\\\",sans-serif}.pointer[_ngcontent-%COMP%]{cursor:pointer}.title[_ngcontent-%COMP%]{color:#900;font-family:\\\"Roboto\\\",sans-serif;text-align:center}.center-aligned[_ngcontent-%COMP%]{align-items:center;display:grid;margin:auto;text-align:center}.description-image[_ngcontent-%COMP%]{margin:auto}.green[_ngcontent-%COMP%]{color:green}.hide[_ngcontent-%COMP%]{display:none!important}.SignInOrContent[_ngcontent-%COMP%]{height:100%;width:100%}.login-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:10px;gap:10px;min-width:180px}.login-options[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{padding:8px 16px;font-size:14px;font-weight:500;border-radius:5px;cursor:pointer;transition:all .3s ease}.login-options[_ngcontent-%COMP%]   .login-btn.google-btn[_ngcontent-%COMP%]{background:white;color:#444;border:thin solid #888;box-shadow:1px 1px 1px gray}.login-options[_ngcontent-%COMP%]   .login-btn.google-btn[_ngcontent-%COMP%]:hover{box-shadow:2px 2px 4px #0003}.login-options[_ngcontent-%COMP%]   .login-btn.sphere-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:none}.login-options[_ngcontent-%COMP%]   .login-btn.sphere-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 5px 15px #667eea66}.sphere-form[_ngcontent-%COMP%]{background:#f8f9fa;padding:20px;border-radius:8px;border:1px solid #ddd;min-width:250px;box-shadow:0 2px 10px #0000001a}.sphere-form[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:20px;font-family:\\\"Roboto\\\",sans-serif;font-weight:500}.sphere-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.sphere-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .sphere-input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;font-family:\\\"Roboto\\\",sans-serif}.sphere-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .sphere-input[_ngcontent-%COMP%]:focus{border-color:#667eea;outline:none;box-shadow:0 0 5px #667eea4d}.sphere-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#e74c3c;font-size:12px;margin-top:5px;font-family:\\\"Roboto\\\",sans-serif}.sphere-form[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;grid-gap:10px;gap:10px;margin-top:20px}.sphere-form[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1;padding:10px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px;font-weight:500;font-family:\\\"Roboto\\\",sans-serif;transition:all .3s ease}.sphere-form[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff}.sphere-form[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 3px 10px #667eea4d}.sphere-form[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.sphere-form[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.sphere-form[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268}@media (max-width: 768px){.login-options[_ngcontent-%COMP%], .sphere-form[_ngcontent-%COMP%]{min-width:auto;width:100%}.sphere-form[_ngcontent-%COMP%]{padding:15px}}\"],\n    changeDetection: 0\n  });\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}