{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../init-user.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/card\";\nimport * as i5 from \"@angular/material/form-field\";\nimport * as i6 from \"@angular/material/input\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"@angular/material/icon\";\nimport * as i9 from \"@angular/material/button\";\n\nfunction GoogleRegistrationComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵelementStart(1, \"div\", 3);\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3, \"Authenticating User...\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction GoogleRegistrationComponent_div_1_mat_hint_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-hint\", 19);\n    i0.ɵɵtext(1, \"User already Exists\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction GoogleRegistrationComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵelementStart(1, \"div\", 5);\n    i0.ɵɵelementStart(2, \"div\", 3);\n    i0.ɵɵelementStart(3, \"mat-card\");\n    i0.ɵɵelementStart(4, \"div\", 6);\n    i0.ɵɵelementStart(5, \"div\", 3);\n    i0.ɵɵelementStart(6, \"div\", 7);\n    i0.ɵɵelementStart(7, \"a\", 8);\n    i0.ɵɵelement(8, \"img\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 6);\n    i0.ɵɵelementStart(10, \"div\", 3);\n    i0.ɵɵtext(11, \" Choose a user handle to proceed. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 6);\n    i0.ɵɵelementStart(13, \"mat-form-field\", 10);\n    i0.ɵɵelementStart(14, \"mat-label\");\n    i0.ɵɵtext(15, \"User Handle\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"input\", 11);\n    i0.ɵɵlistener(\"ngModelChange\", function GoogleRegistrationComponent_div_1_Template_input_ngModelChange_16_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.userHandle = $event;\n    })(\"change\", function GoogleRegistrationComponent_div_1_Template_input_change_16_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.checkHandle();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"mat-icon\", 12);\n    i0.ɵɵlistener(\"click\", function GoogleRegistrationComponent_div_1_Template_mat_icon_click_17_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.enablePassword();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"mat-error\");\n    i0.ɵɵtext(19, \"Pattern: combination of alphabet, number and underscore.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(20, GoogleRegistrationComponent_div_1_mat_hint_20_Template, 2, 0, \"mat-hint\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"div\", 6);\n    i0.ɵɵelementStart(22, \"mat-form-field\", 10);\n    i0.ɵɵelementStart(23, \"mat-label\");\n    i0.ɵɵtext(24, \"Institution\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"input\", 14);\n    i0.ɵɵlistener(\"ngModelChange\", function GoogleRegistrationComponent_div_1_Template_input_ngModelChange_25_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.institution = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"div\", 6);\n    i0.ɵɵelementStart(27, \"mat-form-field\", 10);\n    i0.ɵɵelementStart(28, \"mat-label\");\n    i0.ɵɵtext(29, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"input\", 15);\n    i0.ɵɵlistener(\"ngModelChange\", function GoogleRegistrationComponent_div_1_Template_input_ngModelChange_30_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.emailId = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"div\", 6);\n    i0.ɵɵelementStart(32, \"mat-form-field\", 10);\n    i0.ɵɵelementStart(33, \"mat-label\");\n    i0.ɵɵtext(34, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(35, \"input\", 16);\n    i0.ɵɵlistener(\"ngModelChange\", function GoogleRegistrationComponent_div_1_Template_input_ngModelChange_35_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.fullName = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(36, \"div\", 6);\n    i0.ɵɵelementStart(37, \"div\", 3);\n    i0.ɵɵelementStart(38, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function GoogleRegistrationComponent_div_1_Template_button_click_38_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.register();\n    });\n    i0.ɵɵtext(39, \" Register \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(40, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function GoogleRegistrationComponent_div_1_Template_button_click_40_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.cancel();\n    });\n    i0.ɵɵtext(41, \" Cancel \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(16);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.userHandle);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.isExist());\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.institution);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.emailId);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.fullName);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", !ctx_r1.isEnable());\n  }\n}\n\nexport let GoogleRegistrationComponent = /*#__PURE__*/(() => {\n  class GoogleRegistrationComponent {\n    constructor(router, route, userService, changeDetection) {\n      this.router = router;\n      this.route = route;\n      this.userService = userService;\n      this.changeDetection = changeDetection;\n      this.alive = true;\n      this.emailId = \"\";\n      this.fullName = \"\";\n      this.userHandle = \"\";\n      this.institution = \"\";\n      this.active = false;\n      this.userHandleExist = false;\n    }\n\n    ngOnInit() {\n      this.route.params.subscribe(params => {\n        if (params[\"id\"] != \"\") {\n          console.log(params[\"id\"]);\n          this.token = params[\"id\"];\n          return this.userService.getUserDetailForRegistration(params[\"id\"]).then(data => {\n            this.fullName = data.fullName;\n            this.emailId = data.emailId;\n            this.enableUI();\n          });\n        }\n      });\n      return null;\n    }\n\n    enableUI() {\n      this.alive = false;\n      console.log(this.alive);\n      this.changeDetection.detectChanges();\n    }\n\n    cancel() {\n      this.router.navigate(['auth/login']);\n    }\n\n    register() {\n      if (this.validate()) {\n        var params = {\n          handle: this.userHandle,\n          token: this.token\n        };\n        this.userService.registerUser(params).subscribe(flag => {\n          if (flag) this.router.navigate(['dashboard']);else {\n            alert(\"Error: Please try again\");\n            this.router.navigate(['auth/login']);\n          }\n        }); //this.state.enableLoader();\n      }\n    }\n\n    isExist() {\n      return this.userHandleExist;\n    }\n\n    validate() {\n      let pattern = /^[a-zA-Z0-9_]+$/i;\n      return pattern.test(this.userHandle);\n    }\n\n    checkHandle() {\n      if (this.validate()) {\n        var params = {\n          handle: this.userHandle\n        }; //this.state.enableLoader();\n\n        this.userService.checkHandle(params).subscribe(data => {\n          //this.state.disableLoader();\n          this.active = data.valid;\n          this.userHandleExist = !data.valid;\n        });\n      } else {\n        this.active = false;\n      }\n    }\n\n    enablePassword() {}\n\n    isEnable() {\n      return this.active && this.institution.trim() != '';\n    }\n\n  }\n\n  GoogleRegistrationComponent.ɵfac = function GoogleRegistrationComponent_Factory(t) {\n    return new (t || GoogleRegistrationComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.InitUserService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n  };\n\n  GoogleRegistrationComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: GoogleRegistrationComponent,\n    selectors: [[\"google-registration\"]],\n    decls: 2,\n    vars: 2,\n    consts: [[\"class\", \"row\", 4, \"ngIf\"], [\"class\", \"row\", \"style\", \"margin: 5%; margin-left: 26%; margin-right: 26%;\", 4, \"ngIf\"], [1, \"row\"], [1, \"col-md-12\"], [1, \"row\", 2, \"margin\", \"5%\", \"margin-left\", \"26%\", \"margin-right\", \"26%\"], [1, \"container\"], [1, \"row\", 2, \"text-align\", \"center\"], [1, \"navbar-header\"], [\"href\", \"#\", 1, \"navbar-brand\"], [\"src\", \"./assets/isi_logo.gif\", \"alt\", \"\", 1, \"img-thumbnail\", 2, \"border\", \"none\", \"height\", \"35px\"], [\"appearance\", \"outline\", 1, \"col-md-12\"], [\"matInput\", \"\", \"name\", \"handle\", \"pattern\", \"[a-zA-Z0-9_]*\", \"placeholder\", \"Ex. @david_miller\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"matPrefix\", \"\", 1, \"fas\", \"fa-at\", \"pointer\", \"blue\", 3, \"click\"], [\"style\", \"color:red\", 4, \"ngIf\"], [\"matInput\", \"\", \"name\", \"institution\", 3, \"ngModel\", \"ngModelChange\"], [\"matInput\", \"\", \"name\", \"email\", \"disabled\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"matInput\", \"\", \"name\", \"name\", \"disabled\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"mat-stroked-button\", \"\", 1, \"button\", 3, \"disabled\", \"click\"], [\"mat-stroked-button\", \"\", 1, \"button\", 3, \"click\"], [2, \"color\", \"red\"]],\n    template: function GoogleRegistrationComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, GoogleRegistrationComponent_div_0_Template, 4, 0, \"div\", 0);\n        i0.ɵɵtemplate(1, GoogleRegistrationComponent_div_1_Template, 42, 6, \"div\", 1);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.alive);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.alive);\n      }\n    },\n    directives: [i3.NgIf, i4.MatCard, i5.MatFormField, i5.MatLabel, i6.MatInput, i7.DefaultValueAccessor, i7.PatternValidator, i7.NgControlStatus, i7.NgModel, i8.MatIcon, i5.MatPrefix, i5.MatError, i9.MatButton, i5.MatHint],\n    styles: [\".blue[_ngcontent-%COMP%]{color:#00f;margin-right:.4rem}.button[_ngcontent-%COMP%]{float:right;margin:.2rem}\"]\n  });\n  return GoogleRegistrationComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}