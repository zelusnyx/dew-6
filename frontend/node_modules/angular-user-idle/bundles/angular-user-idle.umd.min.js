!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("angular-user-idle",["exports","@angular/core","rxjs","rxjs/operators"],e):e(t["angular-user-idle"]={},t.ng.core,null,t.Rx.Observable.prototype)}(this,function(t,i,n,o){"use strict";var r=function(){},e=function(){function t(t,e){this._ngZone=e,this.timerStart$=new n.Subject,this.idleDetected$=new n.Subject,this.timeout$=new n.Subject,this.idleMillisec=6e5,this.idleSensitivityMillisec=1e3,this.timeout=300,this.pingMillisec=12e4,t&&this.setConfig(t)}return t.prototype.startWatching=function(){var e=this;this.activityEvents$||(this.activityEvents$=n.merge(n.fromEvent(window,"mousemove"),n.fromEvent(window,"resize"),n.fromEvent(document,"keydown"))),this.idle$=n.from(this.activityEvents$),this.idleSubscription&&this.idleSubscription.unsubscribe(),this.idleSubscription=this.idle$.pipe(o.bufferTime(this.idleSensitivityMillisec),o.filter(function(t){return!t.length&&!e.isIdleDetected&&!e.isInactivityTimer}),o.tap(function(){e.isIdleDetected=!0,e.idleDetected$.next(!0)}),o.switchMap(function(){return e._ngZone.runOutsideAngular(function(){return n.interval(1e3).pipe(o.takeUntil(n.merge(e.activityEvents$,n.timer(e.idleMillisec).pipe(o.tap(function(){e.isInactivityTimer=!0,e.timerStart$.next(!0)})))),o.finalize(function(){e.isIdleDetected=!1,e.idleDetected$.next(!1)}))})})).subscribe(),this.setupTimer(this.timeout),this.setupPing(this.pingMillisec)},t.prototype.stopWatching=function(){this.stopTimer(),this.idleSubscription&&this.idleSubscription.unsubscribe()},t.prototype.stopTimer=function(){this.isInactivityTimer=!1,this.timerStart$.next(!1)},t.prototype.resetTimer=function(){this.stopTimer(),this.isTimeout=!1},t.prototype.onTimerStart=function(){var e=this;return this.timerStart$.pipe(o.distinctUntilChanged(),o.switchMap(function(t){return t?e.timer$:n.of(null)}))},t.prototype.onIdleStatusChanged=function(){return this.idleDetected$.asObservable()},t.prototype.onTimeout=function(){var t=this;return this.timeout$.pipe(o.filter(function(t){return!!t}),o.tap(function(){return t.isTimeout=!0}),o.map(function(){return!0}))},t.prototype.getConfigValue=function(){return{idle:this.idleMillisec,idleSensitivity:this.idleSensitivityMillisec,timeout:this.timeout,ping:this.pingMillisec}},t.prototype.setConfigValues=function(t){!this.idleSubscription||this.idleSubscription.closed?this.setConfig(t):console.error("Call stopWatching() before set config values")},t.prototype.setConfig=function(t){t.idle&&(this.idleMillisec=1e3*t.idle),t.ping&&(this.pingMillisec=1e3*t.ping),t.idleSensitivity&&(this.idleSensitivityMillisec=1e3*t.idleSensitivity),t.timeout&&(this.timeout=t.timeout)},t.prototype.setCustomActivityEvents=function(t){!this.idleSubscription||this.idleSubscription.closed?this.activityEvents$=t:console.error("Call stopWatching() before set custom activity events")},t.prototype.setupTimer=function(e){var i=this;this._ngZone.runOutsideAngular(function(){i.timer$=n.interval(1e3).pipe(o.take(e),o.map(function(){return 1}),o.scan(function(t,e){return t+e}),o.tap(function(t){t===e&&i.timeout$.next(!0)}))})},t.prototype.setupPing=function(t){var e=this;this.ping$=n.interval(t).pipe(o.filter(function(){return!e.isTimeout}))},t.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:r,decorators:[{type:i.Optional}]},{type:i.NgZone}]},t.ngInjectableDef=i.defineInjectable({factory:function(){return new t(i.inject(r,8),i.inject(i.NgZone))},token:t,providedIn:"root"}),t}(),s=function(){function e(){}return e.forRoot=function(t){return{ngModule:e,providers:[{provide:r,useValue:t}]}},e.decorators=[{type:i.NgModule,args:[{imports:[]}]}],e}();t.UserIdleService=e,t.UserIdleConfig=r,t.UserIdleModule=s,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=angular-user-idle.umd.min.js.map